<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Shooter Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #1e1e1e;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
        }
        h2 {
            color: white;
            position: fixed;
            top: 10px;
            left: 10px;
        }
        #restart-btn {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #4CAF50;
            color: white;
            padding: 15px 32px;
            font-size: 16px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        #restart-btn:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h2>Score: <span id="score">0</span></h2>
    <h2 style="color:white; position: fixed; top: 10px; right: 10px;">Elio</h2>
    <canvas id="gameCanvas"></canvas>
    <button id="restart-btn" onclick="restartGame()">Restart Game</button>

    <script>
        // Canvas setup
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Game variables
        let player, bullets, enemies, gameOver;
        let score = 0;
        const playerSpeed = 5;
        const bulletSpeed = 7;
        const enemySpeed = 2;

        // Player object
        function Player(x, y) {
            this.x = x;
            this.y = y;
            this.width = 40;
            this.height = 40;
            this.color = 'blue';
            this.health = 100;
            this.moveUp = false;
            this.moveDown = false;
            this.moveLeft = false;
            this.moveRight = false;

            this.update = function() {
                if (this.moveUp && this.y > 0) this.y -= playerSpeed;
                if (this.moveDown && this.y < canvas.height - this.height) this.y += playerSpeed;
                if (this.moveLeft && this.x > 0) this.x -= playerSpeed;
                if (this.moveRight && this.x < canvas.width - this.width) this.x += playerSpeed;

                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
            };
        }

        // Bullet object
        function Bullet(x, y) {
            this.x = x;
            this.y = y;
            this.radius = 5;
            this.color = 'red';

            this.update = function() {
                this.y -= bulletSpeed;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.closePath();
            };
        }

        // Enemy object
        function Enemy(x, y) {
            this.x = x;
            this.y = y;
            this.width = 40;
            this.height = 40;
            this.color = 'green';
            this.speed = enemySpeed;
            this.health = 1; // Change health to 1 (enemies die in one hit)

            this.update = function() {
                this.y += this.speed;
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
            };
        }

        // Create player
        player = new Player(canvas.width / 2, canvas.height - 50);

        // Bullet array
        bullets = [];

        // Enemy array
        enemies = [];

        // Game over flag
        gameOver = false;

        // Create new enemy
        function createEnemy() {
            let x = Math.random() * (canvas.width - 40);
            let y = -40;  // Start off-screen
            enemies.push(new Enemy(x, y));
        }

        // Shooting logic
        function shootBullet() {
            let bullet = new Bullet(player.x + player.width / 2, player.y);
            bullets.push(bullet);
        }

        // Collision detection
        function detectCollisions() {
            bullets.forEach((bullet, index) => {
                enemies.forEach((enemy, enemyIndex) => {
                    if (bullet.y <= enemy.y + enemy.height && bullet.y >= enemy.y && bullet.x >= enemy.x && bullet.x <= enemy.x + enemy.width) {
                        // Bullet hits the enemy
                        enemies.splice(enemyIndex, 1);  // Remove the enemy
                        bullets.splice(index, 1);  // Remove the bullet
                        score += 10;  // Increase score
                        document.getElementById("score").textContent = score; // Update score display
                    }
                });
            });

            // Check for collisions with player (game over)
            enemies.forEach((enemy, enemyIndex) => {
                if (enemy.y + enemy.height >= player.y && enemy.x < player.x + player.width && enemy.x + enemy.width > player.x) {
                    gameOver = true;  // Game over if player touches an enemy
                    document.getElementById("restart-btn").style.display = "block";  // Show restart button
                }
            });
        }

        // Restart the game
        function restartGame() {
            player = new Player(canvas.width / 2, canvas.height - 50);
            bullets = [];
            enemies = [];
            score = 0;
            gameOver = false;
            document.getElementById("score").textContent = score;
            document.getElementById("restart-btn").style.display = "none";  // Hide restart button
            gameLoop();  // Restart the game loop
        }

        // Keydown event listener
        document.addEventListener('keydown', (e) => {
            if (e.key === 'w' || e.key === 'ArrowUp') player.moveUp = true;
            if (e.key === 's' || e.key === 'ArrowDown') player.moveDown = true;
            if (e.key === 'a' || e.key === 'ArrowLeft') player.moveLeft = true;
            if (e.key === 'd' || e.key === 'ArrowRight') player.moveRight = true;
            if (e.key === ' ' && !gameOver) shootBullet();  // Space to shoot
        });

        // Keyup event listener
        document.addEventListener('keyup', (e) => {
            if (e.key === 'w' || e.key === 'ArrowUp') player.moveUp = false;
            if (e.key === 's' || e.key === 'ArrowDown') player.moveDown = false;
            if (e.key === 'a' || e.key === 'ArrowLeft') player.moveLeft = false;
            if (e.key === 'd' || e.key === 'ArrowRight') player.moveRight = false;
        });

        // Game loop
        function gameLoop() {
            if (gameOver) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);  // Clear canvas

            player.update();  // Update player position
            bullets.forEach(bullet => bullet.update());  // Update bullet positions
            enemies.forEach(enemy => enemy.update());  // Update enemies
            detectCollisions();  // Check for collisions

            // Create new enemies periodically
            if (Math.random() < 0.02) createEnemy();

            // Repeat the game loop
            requestAnimationFrame(gameLoop);
        }

        // Start the game loop
        gameLoop();
    </script>
</body>
</html>
